<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
	<head>
		<title>index</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<style type="text/css" media="screen">
		html, body { height:100%; background-color: #ccc;}
		body { margin:0; padding:0; overflow:hidden; }
		#flashContent { width:100%; height:100%; }
		</style>
		<script src="http://misc.fan.com/min/f=js/jquery-1.6.2.min.js,js/sea.js&20101020"></script>
		<script src="http://misc.fan.com/min/f=js/plugs/tmpl.min.js&20101020"></script>
		<link rel="stylesheet" type="text/css" media="screen" href="http://misc.fan.com/min/f=css2/core.css"></link>
	</head>
	<body style="padding-left:50px;">
	<script type="text/javascript">
	<!--
		
		var flashHtml = '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="550" height="400" id="index" align="middle">'+
				'<param name="movie" value="$flash$" />'+
				'<param name="quality" value="high" />'+
				'<param name="bgcolor" value="#ffffff" />'+
				'<param name="play" value="true" />'+
				'<param name="loop" value="true" />'+
				'<param name="wmode" value="window" />'+
				'<param name="scale" value="showall" />'+
				'<param name="menu" value="true" />'+
				'<param name="devicefont" value="false" />'+
				'<param name="salign" value="" />'+
				'<param name="allowScriptAccess" value="sameDomain" />'+
				'<param name="wmode" value="transparent">'+
				'<param name="flashvars" value="name=test&test=1">'+
				'<!--[if !IE]>-->'+
				'<object type="application/x-shockwave-flash" data="$flash$" width="550" height="400">'+
					'<param name="movie" value="$flash$" />'+
					'<param name="quality" value="high" />'+
					'<param name="bgcolor" value="#ffffff" />'+
					'<param name="play" value="true" />'+
					'<param name="loop" value="true" />'+
					'<param name="wmode" value="window" />'+
					'<param name="scale" value="showall" />'+
					'<param name="menu" value="true" />'+
					'<param name="devicefont" value="false" />'+
					'<param name="salign" value="" />'+
					'<param name="allowScriptAccess" value="sameDomain" />'+
					'<param name="wmode" value="transparent">'+
					'<param name="flashvars" value="name=test&test=1">'+
				'<!--<![endif]-->'+
					'<a href="http://www.adobe.com/go/getflash">'+
						'<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="获得 Adobe Flash Player" />'+
					'</a>'+
				'<!--[if !IE]>-->'+
				'</object>'+
				'<!--<![endif]-->'+
			'</object>';
		
		function getFlashHtml(swf,width,height){
			swf = swf+'?'+Math.random();
			flashHtml = '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="'+width+'" height="'+height+'" id="myFlash" style="position:absolute;border:1px solid blue;top:100px;left:100px;">'+
				'<param name="allowScriptAccess" value="sameDomain" />'+
				'<param name="movie" value="'+swf+'" />'+
				'<param name="quality" value="high" />'+
				'<param name="bgcolor" value="#ffffff" />'+
				'<param name="wmode" value="transparent">'+
				'<param name="flashvars" value="name=test&test=1">'+
				'<embed src="'+swf+'" quality="high" bgcolor="#ffffff" width="'+width+'" height="'+height+'" name="myFlash" swLiveConnect="true" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" wmode="transparent" flashvars="name=test&test=1"/> '+
			  '</object>';
			return flashHtml;
		}
		
		window.onload = function(){
			//document.getElementById('flashContent').innerHTML = getFlashHtml('index.swf',300,400);
		}
		var myLog = (function(){
			if(typeof console == 'undefined'){
				return (function(){
					var div = document.createElement('div');
					div.style.border = '1px solid red';
					div.style.position = 'absolute';
					div.style.width = '300px';
					div.style.right = '0px';
					div.style.overflow = 'scroll';
					div.style.height = '400px';
					document.body.appendChild(div);
					return function(){
						div.innerHTML = Array.prototype.slice.call(arguments,0).join(',')+'<br/>'+div.innerHTML;
					}
				})()
			}else{
				return function(){
					console.log.apply(console,Array.prototype.splice.call(arguments,0));
				}
			}
		})();

		window.onload = (function(){
			seajs.use('http://flash.zk.com/upload/upload.js?'+Math.random(),function(upload){
				var btn = $('#btn');
				new upload.Upload({
					'width' : 100,
					'height' : 100,
					'fileType' : '*.jpg',
					'allowFileSize' : '6m',
					'allowFileNum' : 6,
					//'uploadUrl' : 'test',
					'onMouseEnter' : function(){
						btn.css({'background-color':'red'});
					},'onMouseLeave' : function(){
						btn.css({'background-color':'blue'});
					},'onGetFiles' : function(){
						myLog('文件：',arguments);
					},'onAllUploadComplete': function(){
						myLog('全部上传完成',arguments);
					},'onToMaxNum' : function(){
						myLog('自定义：最多上传',arguments);
					},'onToMaxSize' : function(){
						myLog('自定义：这些文件太大',arguments);
					}
				}).show(btn);
			});
		})
		
	//-->
	</script>
		<div id="btn" style="width:100px;height:100px;background-color:blue">按钮</div>
		<style>
			.upload_progress{
				position:absolute;
				top:120px;
				left:100px;
				background-color:#bbb;
				padding-bottom:1px;
			}
			.upload_progress li{
				vertical-align:bottom;
				position:relative;
				width:200px;
				height:25px;
				background-color:white;
				margin:1px 1px 0;
			}
			.upload_progress li span{
				position:absolute;
				height:16px;
				padding:3px 0;
				z-index:102;
				top:0px;
			}
			.upload_filename{
				left:3px;
				width:130px;
				overflow:hidden;
			}
			.upload_close{
				right:3px;
				cursor:pointer;
			}
			.upload_progress .upload_progressbar{
				top:1px;
				height:23px;
				padding:0;
				left:1px;
				background-color:#ff9;
				z-index:101;
				width:0px;/*最大值为180*/
			}
			.upload_status{
				right:20px;
				width:50px;
				text-align:center;
			}
		</style>

		<ul class="upload_progress hide">
			<li>
				<span class="upload_filename">测试文件名测试文件名测试文件名测试文件名</span>
				<span class="upload_close">X</span>
				<span class="upload_status">成功</span>
				<span class="upload_progressbar"></span>
			</li>
			<li>
				<span class="upload_filename">测试文件名</span>
				<span class="upload_close">X</span>
				<span class="upload_status">40%</span>
				<span class="upload_progressbar"></span>
			</li>
			<li>
				<span class="upload_filename">测试文件名</span>
				<span class="upload_close">X</span>
				<span class="upload_status">等待...</span>
				<span class="upload_progressbar"></span>
			</li>
		</ul>
		<div id="flashContent"></div>
	</body>
</html>
